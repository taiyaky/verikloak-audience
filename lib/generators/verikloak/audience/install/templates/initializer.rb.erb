# frozen_string_literal: true

# Verikloak Audience Configuration
#
# Configure the audience validation profile and settings.
# This middleware provides stricter audience validation than core Verikloak.
#
# The middleware is automatically inserted after Verikloak::Middleware by the
# Railtie. No manual middleware insertion is required.
#
Verikloak::Audience.configure do |config|
  # Audience validation profile
  # :strict_single   - Only exact single audience match (default, recommended)
  # :allow_account   - Allow "account" alongside your API audience
  # :any_match       - At least one required audience is present (more permissive)
  # :resource_or_aud - Check resource_access roles first, fallback to :allow_account
  # config.profile = :strict_single

  # Required audience(s) - synced from verikloak-rails automatically
  # config.required_aud = ['rails-api']

  # Skip paths for audience validation (synced from verikloak-rails automatically)
  # config.skip_paths = %w[/up /health]
end
